<!DOCTYPE HTML>
<html lang="it" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Sistemi e Reti - 4y</title>
        
        <meta name="robots" content="noindex" />
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
        <link rel="stylesheet" href="custom.css">
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "light" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div id="sidebar-scrollbox" class="sidebar-scrollbox">
                <ol class="chapter"><li class="expanded "><a href="index.html"><strong aria-hidden="true">1.</strong> Benvenuti</a></li><li class="expanded "><a href="01-switch/index.html"><strong aria-hidden="true">2.</strong> Data Link</a></li><li class="expanded "><a href="02-network/00-README.html"><strong aria-hidden="true">3.</strong> Basi di Networking</a></li><li><ol class="section"><li class="expanded "><a href="02-network/01-0-ip-mask.html"><strong aria-hidden="true">3.1.</strong> IP &amp; maschere</a></li><li class="expanded "><a href="02-network/01-1-class-classless.html"><strong aria-hidden="true">3.2.</strong> Classless &amp; classful</a></li><li class="expanded "><a href="02-network/02-icann.html"><strong aria-hidden="true">3.3.</strong> ICANN</a></li><li class="expanded "><a href="02-network/03-addressing.html"><strong aria-hidden="true">3.4.</strong> Indirizzamento</a></li><li class="expanded "><a href="02-network/04-net-bc.html"><strong aria-hidden="true">3.5.</strong> IP rete &amp; broadcast</a></li></ol></li><li class="expanded "><a href="03-routing/00-README.html"><strong aria-hidden="true">4.</strong> Routing</a></li><li><ol class="section"><li class="expanded "><a href="03-routing/01-wan.html"><strong aria-hidden="true">4.1.</strong> WAN</a></li><li class="expanded "><a href="03-routing/02-ospf.html"><strong aria-hidden="true">4.2.</strong> OSPF</a></li></ol></li><li class="expanded "><a href="04-transport/00-README.html"><strong aria-hidden="true">5.</strong> Transport Layer</a></li><li><ol class="section"><li class="expanded "><a href="04-transport/01-nat-pat.html"><strong aria-hidden="true">5.1.</strong> NAT&amp;PAT</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">Sistemi e Reti - 4y</h1>

                        <div class="right-buttons">
                            <a href="print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                            
                            <a href="https://github.com/wbigger/book-4y-networks/" title="Git repository" aria-label="Git repository">
                                <i id="git-repository-button" class="fa fa-github"></i>
                            </a>
                            
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#sistemi-e-reti-quarto-anno" id="sistemi-e-reti-quarto-anno">Sistemi e reti, quarto anno</a></h1>
<p><strong>A.S. 2019-2020</strong></p>
<p><strong>Istituto di Istruzione Superiore G. Marconi</strong></p>
<p><strong>Istituto tecnico, indirizzo informatico</strong></p>
<p>Benvenuti ragazzi!</p>
<p>Questo materiale riepiloga quanto detto a lezione negli scorsi giorni.</p>
<p>Le risposte alle domande dei compiti in classe sono tutte incluse in questo materiale.</p>
<p>I riferimenti al libro di testo sono tra parentesi quadre, come ad esempio [pag. 1].</p>
<blockquote>
<p>Il testo in questi box sono per approfondimento. La lettura di questo materiale non è strettamente
necessaria per le verifiche, ma è consigliata per vostra cultura personale e in quanto
sapere indispensabile per chi vuole diventare un informatico.</p>
</blockquote>
<p>Buon studio e buon lavoro.</p>
<style>
.centered {
	text-align: center;
}

img {
  width: 20%;
}

img.right_side {
  float: right;
  margin:5px 5px 0px 20px;
  width: 30%;
}
img.w10 {
  width: 50%;
}
img.left_side {
  float:left;
  margin:5px 20px 0px 5px;
  width: 20%;
}

p.clear {
  clear: both;  
}
p.img-container {
  margin-bottom: 15px;
}

p.img-container::after {
  margin-bottom: 15px;
  overflow: hidden;
  clear: both;
}
</style>
<h1><a class="header" href="#data-link-layer" id="data-link-layer">Data-link layer</a></h1>
<p>Cominciamo le lezioni di quest'anno con un approfondimento sul livello 2 della pila ISO-OSI: il <em>data-link layer</em>.</p>
<p>Come dice il nome, il livello data-link ci assicura che ci sia un collegamento (<em>link</em>) che permetta di scambiare dati tra più computer. Il suo funzionamento quindi prevederà il minimo necessario per far sì che questo avvenga.</p>
<h2><a class="header" href="#mac-address" id="mac-address">MAC Address</a></h2>
<p>Per cominciare, ci dovrà essere un modo per distinguere le diverse macchine tra di loro. Come facciamo a dire che il destinatario del mio messaggio deve essere un esatto computer, e che il mittente sono proprio io? Per fare questo, il livello 2 data-link utilizza il concetto di <em>indirizzo MAC</em> (in inglese MAC address).</p>
<blockquote>
<p>MAC è l'acronimo di Media Access Control.</p>
</blockquote>
<p class="img-container">
<img class="right_side w10" title="MAC address" alt="MAC address" src="01-switch/assets/mac.png">
<p>Possiamo pensare al MAC come il codice fiscale della nostra interfaccia di rete, che è univoco in tutto il mondo. In altre parole, non possono esistere due interfacce di rete con lo stesso indirizzo MAC. È composto da 6 byte (48 bit), che convenzionalmente sono divisi tra loro da <code>:</code> (due punti). Un MAC address valido è, ad esempio, <code>01:02:03:ab:cd:ef</code>.</p>
</p>
<blockquote>
<p>Secondo lo standard più diffuso attualmente, i primi 3 byte del MAC identificano la casa produttrice e gli ultimi 3 l'interfaccia.</p>
</blockquote>
<blockquote>
<p>Potreste trovare anche altri separatori tra i byte del MAC address, come ad esempio il punto o il trattino. Sono meno comuni e ne sconsiglio l'uso.</p>
</blockquote>
<p>Sottolineo che abbiamo detto che il MAC address è assegnato ad ogni singola <em>interfaccia di rete</em> e non al computer nel suo complesso. Questo perché, molto spesso, un computer ha più di una interfaccia di rete. Ad esempio uno smartphone ha l'interfaccia per la rete dati in 4G ed un'altra interfaccia per il WiFi. Ovviamente, le due interfacce avranno MAC address diversi.</p>
<h2><a class="header" href="#switch" id="switch">Switch</a></h2>
<p>Immaginiamo ora di dover connettere tre computer tra di loro. Connettiamo con un cavo Ethernet la loro interfaccia LAN ad uno switch, che ricordiamo essere un dispositivo di rete con tante <em>porte</em> a cui si possono collegare altrettante macchine. Lo switch, avrà quindi il compito di smistare i pacchetti al giusto destinatario.</p>
<p class="centered">
<img style="width:85%; margin:15px 0" title="switch-example" alt="switch-example" src="01-switch/assets/01-switch.jpeg" >
</p>
<p>Domanda: perché lo switch deve preoccuparsi di smistare il pacchetto solo al destinatario, e non inoltra tutto a tutti? Identifichiamo due problemi principali.</p>
<ul>
<li>sicurezza: non vogliamo che tutti i computer siano in grado di leggere i messaggi diretti ad altri</li>
<li>traffico: vogliamo ridurre il traffico sui cavi il più possibile</li>
</ul>
<blockquote>
<p>Fino a qualche anno fa esistevano dei dispositivi che inoltravano tutto a tutti, si chiamavano <em>hub</em>, ora non sono più usati.</p>
</blockquote>
<h2><a class="header" href="#mac-address-table" id="mac-address-table">MAC Address Table</a></h2>
<p>Il funzionamento di uno switch, almeno a livello concettuale, è abbastanza semplice. Al suo interno, lo switch salva in memoria una tabella con due colonne e tante righe quante sono le porte fisiche dello switch. Nel caso dell'esempio precedente, la MAC address table sarà la seguente.</p>
<table><thead><tr><th>Port number</th><th>MAC address</th></tr></thead><tbody>
<tr><td>1</td><td>16:a7:c7:66:13:f9</td></tr>
<tr><td>2</td><td>4A:00:06:05:eb:32</td></tr>
<tr><td>3</td><td></td></tr>
<tr><td>4</td><td>06:cd:89:9a:64:77</td></tr>
</tbody></table>
<p>Quando lo switch riceve un pacchetto, prima di tutto assegna (se già non lo aveva fatto in precedenza) il MAC address del mittente alla porta dal quale lo ho ricevuto. Quindi controlla il MAC address del destinatario, e lo inoltra solo alla porta dove è connesso tale destinatario.</p>
<p>Esempio: il computer nella porta 1 ha MAC address <code>16:a7:c7:66:13:f9</code> e vuole inviare un messaggio a <code>06:cd:89:9a:64:77</code>. Quando lo switch riceve il messaggio dalla porta 1, assegna <code>16:a7:c7:66:13:f9</code> a tale porta. Quindi controlla in quale riga c'è l'indirizzo del destinatario, in questo caso la porta 4, e inoltra il pacchetto solo a quella porta.</p>
<p>Ma all'inizio, quando accendo per la prima volta lo switch, come faccio a riempire tutta la tabella? Ci sono varie strategie.</p>
<ul>
<li>quando un nuovo dispositivo si connette, invia un messaggio di broadcast che ha come destinatario lo speciale indirizzo <code>ff:ff:ff:ff:ff:ff</code>. Tutti i dispositivi connessi allo switch rispondono a questo messaggio, e la tabella viene riempita di conseguenza</li>
<li>quando lo switch non trova il destinatario di un messaggio nella tabella, inoltra il messaggio a tutti, sperando che il corretto destinatario lo riceva. Questa operazione è chiamata <em>flooding</em> (allagamento).</li>
</ul>
<p>Se non è possibile consegnare il pacchetto, lo switch risponde al mittente comunicando che il destinatario non è reperibile.</p>
<h2><a class="header" href="#switch-di-livelli-superiori" id="switch-di-livelli-superiori">Switch di livelli superiori</a></h2>
<p>Il comportamento dello switch descritto fin qui è quello di uno switch &quot;puro&quot;, ovvero che opera unicamente al livello 2 (data-link) della pila ISO/OSI. Un tale dispositivo viene chiamato anche <em>switch L2</em> e non sa niente dei livelli superiori; ad esempio non sa cosa sia un indirizzo IP. È importante notare però che, al giorno d'oggi, molto spesso gli switch hanno molte funzioni ed operano anche a livelli superiori. Questo genere di dispositivi viene chiamato, in base alle caratteristiche, <em>switch L2+</em>, <em>switch L2/L3</em> o anche <em>switch L3</em>.</p>
<p>Quindi non vi stupite se vedete un oggetto chiamato &quot;switch&quot; che lavora anche con IP e altro. L'importante è che sappiate orientarvi sempre correttamente e che non vi confondiate.</p>
<h2><a class="header" href="#mac-address-e-sicurezza-informatica" id="mac-address-e-sicurezza-informatica">MAC address e sicurezza informatica</a></h2>
<p>Abbiamo detto che il MAC address è univoco, associato all'interfaccia di rete. Aggiungiamo anche che non si può <em>cambiare</em> il MAC address scritto all'interno della scheda, perché è <em>hard-coded</em> al momento della fabbricazione. È possibile tuttavia <em>camuffarlo</em> nel momento dell'invio, in modo da fingerci qualcun altro. Questa strategia si chiama &quot;MAC spoofing&quot; ed ha moltissimi usi.</p>
<blockquote>
<p><em>Hard-coding</em> significa che un'informazione è stata scritta all'interno di un dispositivo hardware al momento della fabbricazione e non può essere cambiato durante tutta la sua vita.</p>
</blockquote>
<blockquote>
<p><em>Spoofing</em> letteralmente significa &quot;imbrogliare&quot;, ma in questo caso si tradue solitamente con camuffare.</p>
</blockquote>
<p>Il MAC spoofing può servire ad attaccare un sistema per intercettare informazioni che non sarebbero dirette a noi. Oppure possiamo usarlo per impedire di essere tracciati dal nostro operatore telefonico o dal gestore del WiFi, o ancora per usare una licenza di un software che era associata ad un altro computer.</p>
<p>Il MAC spoofing, come molto spesso accade in informatica, non è legale od illegale <em>di per sé</em>. Dipende dall'uso che ne facciamo, e molto spesso il confine della legalità è molto sfumato e difficile da definire.</p>
<h1><a class="header" href="#network-layer" id="network-layer">Network layer</a></h1>
<p>Finora abbiamo visto come mettere in comunicazione fra di loro un numero relativamente piccolo di computer, ovvero quelli che possono essere connessi ad un singolo switch. Per connettere ancora più computer, potremmo mettere degli switch a cascata, collegati tra di loro: si può fare, ma al crescere dei computer e degli switch, si cominciano ad avere una serie di problemi di inefficienza e sicurezza che devono essere risolti.</p>
<p>Per creare reti di computer di grandi dimensini, la pila ISO/OSI introduce il concetti di <em>rete</em> e <em>sottorete</em>, e passiamo quindi al terzo livello, il &quot;network layer&quot;.</p>
<h2><a class="header" href="#la-nascita-di-internet" id="la-nascita-di-internet">La nascita di Internet</a></h2>
<p>La soluzione più utilizzata oggi è quella di assegnare un altro indirizzo ad ogni macchina, chiamato <strong>IP Address</strong>, formato da 4 byte, che lo identifica univocamente all'<em>interno di una sottorete</em>. All'indirizzo IP deve sempre essere associato un altro numero, chiamato maschera di sottorete (<strong>subnet mask</strong>), anch'esso di 4 byte, che definisce la grandezza della sottorete in cui ci troviamo. Le reti sono connesse tra di loro da dei dispositivi di rete dedicate, tipicamente dei <strong>router</strong> (instradatori). Questo sistema venne inventato agli inizi degli anni '70 e venne chiamato <strong>Internet</strong>, ed è proprio quello che utilizziamo oggi quotidianamente.</p>
<p class="img-container">
<img class="right_side w35p" title="vint-bob" alt="vint-bob" src="02-network/assets/vint-bob.jpg">
<blockquote>
<p>I padri fondatori di Internet sono <a href="https://it.wikipedia.org/wiki/Vint_Cerf">Vint Cerf</a> e <a href="https://it.wikipedia.org/wiki/Robert_Kahn">Bob Kahn</a> che nel <strong>1972</strong> circa, mentre lavoravano presso il DARPA (Agenzia per i Progetti di ricerca avanzata per la Difesa), in America, hanno messo le basi per questa tecnologia ed i relativi protocolli.</p>
</blockquote>
</p>
<blockquote>
<p>Internet non è l'unico sistema che è nato negli anni 70, ma è quello che nel tempo ha preso il sopravvento rispetto a tutti gli altri.</p>
</blockquote>
<p>Una nota sull'uso della parola &quot;Internet&quot;: tecnicamente, una qualsiasi rete di computer connessi tra di loro con indirizzi IP è una rete Internet. Tuttavia, nell'uso quotidiano usiamo questa parola per indicare la rete <em>globale</em> di computer. In questo testo si specificherà &quot;rete Internet globale&quot; quando necessario per evitare fraintendimenti.</p>
<h1><a class="header" href="#indirizzi-ip-e-maschere-di-sottorete" id="indirizzi-ip-e-maschere-di-sottorete">Indirizzi IP e maschere di sottorete</a></h1>
<p>L'indirizzo IP (<em>Internet Protocol</em>) come detto è formato da 4 byte e viene rappresentato come segue:</p>
<p class="centered xxl-font">
<strong>
172.16.254.1
</strong>
</p>
<p>Ognuno dei numeri rappresenta un byte e può quindi assumere un valore da 0 a 255.</p>
<p>Un indirizzo IP può rappresentare in alternativa una delle seguenti cose:</p>
<ul>
<li>indirizzo IP che identifica una rete</li>
<li>indirizzo IP che identifica un dispositivo appartenente ad una rete</li>
<li>indirizzo IP di broadcast, per comunicare facilmente con tutti i dispositivi appartenenti ad una determinata rete.</li>
</ul>
<p>Come già detto, ad un indirizzo IP è <em>sempre</em> associata la subnet mask che indica la grandezza della rete a cui appartiene. Non può esistere un indirizzo IP senza subnet mask!</p>
<h2><a class="header" href="#indirizzo-di-rete" id="indirizzo-di-rete">Indirizzo di rete</a></h2>
<p>Tutto parte con l'indirizzo che assegniamo ad una rete. Alcuni esempi di indirizzi di rete validi sono:</p>
<ul>
<li>10.0.0.0</li>
<li>10.168.232.64</li>
<li>192.168.43.0</li>
<li>216.58.198.0</li>
</ul>
<p>Attenzione: gli indirizzi di rete <strong>non</strong> possono essere assegnati a dispositivi, siano essi computer o router. Sono indirizzi che individuano la rete e non corrispondono a nessun oggetto fisico reale.</p>
<p>Quanti dispositivi può contenere una rete? Questo numero dipende dal secondo numero fondamentale a cui abbiamo accennato, ovvero la maschera di sottorete.</p>
<h2><a class="header" href="#maschera-di-sottorete" id="maschera-di-sottorete">Maschera di sottorete</a></h2>
<p>Come facciamo a sapere quanti computer possono far parte di una rete? Mettendoci nei panni dei creatori di Internet, proviamo a ragionare su quale potrebbe essere un metodo comodo per raggiungere questo scopo.</p>
<p>Sappiamo che, da come è stato definito l'indirizzo IP, la grandezza massima teorica di una rete è 4 byte, quindi 32 bit (circa 4 miliardi di computer). Non è tecnicamente possibile avere reti IP più grandi.</p>
<blockquote>
<p>Per esattezza, esiste un altro standard IP che usa 16 byte per l'indirizzo e quindi può ospitare molti più computer. Questo standard è nato alla fine degli anni '90 e si chiama <em>IPv6</em>, è supportato ormai da tutti i sistemi operativi e dispositivi di rete, e viene regolarmente utilizzato anche se noi non ce ne accorgiamo. La sua ulteriore diffusione è legata, tra le altre cose, agli sviluppo del 5G e dell'Internet of Things. Vedremo cosa succederà! In questo capitolo noi ci occupiamo solo dello standard tradizionale, l'IPv4.</p>
</blockquote>
<p>Per calcolare la dimensione minima di una rete bisogna prestare leggermente più attenzione. Nel caso limite, una rete è formata da minimo 2 computer (una rete di un singolo computer infatti... non è una rete :)) Ai due indirizzi assegnati ai computer dobbiamo aggiungere l'indirizzo IP della rete e quello di broadcast. Abbiamo quindi bisogno di 4 indirizzi IP per la rete più piccola possibile. Per identificare 4 indirizzi servono esattamente 2 bit.</p>
<p>Ora, attenzione: per convenzione la maschera di sottorete indica il numero di bit della parte <em>fissa</em> del nostro indirizzo IP, ovvero quella parte iniziale che <em>non</em> cambia. Una rete della massima grandezza <em>non</em> avrà una parte fissa, e quindi la maschera di sottorete sarà esattamente 0. Se invece noi abbiamo una rete con due soli computer, avremo solo gli ultimi 2 bit variabili, e la nostra maschera di sottorete varrà 30.</p>
<p>In generale, la formula per calcolare la maschera di sottorete è:</p>
<p class="centered">
<strong>
maschera di sottorete: 32 - numero di bit per la dimensione della rete
</strong>
</p>
<p>Questo numero convenzionalmente viene messo subito dopo l'indirizzo IP, separato da uno slash (<code>/</code>); per questo motivo viene chiamata anche <em>slash notation</em>.</p>
<p>Facciamo alcuni esempi validi di indirizzi di rete con subnet mask:</p>
<ul>
<li>10.0.0.0/8</li>
<li>10.168.232.64/20</li>
<li>192.168.43.0/24</li>
<li>216.58.198.0/30</li>
</ul>
<h3><a class="header" href="#un-caso-particolare" id="un-caso-particolare">Un caso particolare</a></h3>
<p>Prima di concludere, esaminiamo un caso particolare:</p>
<p class="centered large-font">
<strong>
0.0.0.0/0
</strong>
</p>
<p>A cosa corrisponde questa rete? Vediamo di analizzarla nel dettaglio:</p>
<ul>
<li>0.0.0.0 corrisponde al primo indirizzo IP disponibile in assoluto</li>
<li>/0 significa che non ci sono bit fissi della rete, e quindi è tutta assegnabile a dei dispositivi.
Detto in altre parole, la rete 0.0.0.0/0 include <em>tutti gli indirizzi IP possibili</em> e corrisponde quindi a <em>tutto Internet</em>, sia esso locale o globale!</li>
</ul>
<h1><a class="header" href="#classful-e-classless" id="classful-e-classless">Classful e classless</a></h1>
<p>Prima di andare avanti, è necessario fare un approfondimento storico, per capire meglio il presente.</p>
<p>Il metodo che abbiamo visto di calcolare la maschera di sottorete utilizzando il numero esatto di bit, è attualmente lo standard e viene chiamato CIDR (Classless Inter-Domain Routing). Fate attenzione alla parola <em>classless</em>, che in italiano si può tradurre con &quot;senza classi&quot;: per capire a cosa si riferisce, bisogna addentrarsi un po' nella storia degli indirizzi IP.</p>
<h2><a class="header" href="#classi-di-indirizzi-ip" id="classi-di-indirizzi-ip">Classi di indirizzi IP</a></h2>
<p>Quando è nato Internet, negli anni '70, la maschera di sottorete era unica e fissa per tutti gli indirizzi IP, ed era di 8 bit. C'erano quindi solo 254 reti, ognuna con circa 16 milioni di dispositivi.</p>
<p>Quando negli anni '80 la tecnologia di Internet prese piede a livello mondiale, ci fu la necessità di mettere a disposizione un maggior numero di reti. Si decise quindi di cambiare un po' strategia e di assegnare delle maschere di rete in automatico in base ai primi bit dell'indirizzo IP.</p>
<p>Decisero di divedere gli indirizi IP in tre <em>classi</em>:</p>
<ul>
<li><strong>classe A</strong>: il primo bit dell'indirizzo è 0; in questo caso si mantiene la maschera a 8 bit</li>
<li><strong>classe B</strong>: il primo bit dell'indirizzo è 1 e il secondo 0; in questo caso viene assegnata una maschera a 16 bit</li>
<li><strong>classe C</strong>: i primi due bit dell'indirizzo sono entrambi 1 ed il terzo a 0; in questo caso viene assegnata una maschera a 24 bit</li>
</ul>
<p>In questo modo, il numero di reti assegnabili aumentò notevolmente e per un po' il problema dell'esaurimento delle reti fu arginato.</p>
<blockquote>
<p>Per completezza, esistono altre due classi, la D e la E, in base al valore del terzo e quarto bit. Noi non le tratteremo.</p>
</blockquote>
<h3><a class="header" href="#una-scelta-infelice" id="una-scelta-infelice">Una scelta infelice</a></h3>
<p>Nel passare alle classi, ci fu la necessità di rappresentare in qualche modo la maschera di sottorete. Decisero di rappresentare le maschere con la stessa notazione in 4 ottetti degli indirizzi IP, in cui venivano valorizzati ad 1 il numero di bit della maschera di sottorete. Si ottenne il risultato seguente:</p>
<ul>
<li>per la classe A: 255.0.0.0</li>
<li>per la classe B: 255.255.0.0</li>
<li>per la classe C: 255.255.255.0</li>
</ul>
<p>Questa scelta fu un po' infelice, perché ha una serie di problemi:</p>
<ol>
<li>la rappresentazione è uguale a quella degli indirizzi IP, nonostante sia un concetto completamente diverso, portando quindi ad una certa confusione</li>
<li>la rappresentazione è molto prolissa, quando viene scritta usa molti più caratteri di quanto potrebbero essere necessari</li>
<li>ci sono potenzialmente molte maschere di sottorete non valide. Ad esempio le maschere 255.255.235.0, 255.255.0.255 non hanno senso. Questo, insieme al punto precedente, porta ad un maggior rischio di errori</li>
<li>se il numero di bit della maschera non è moltiplo di 8 questa notazione diventa di non immediata interpretazione. Ad esempio una maschera di 20 bit viene rappresentata come 255.255.240.0, ed una maschera di 14 bit come 255.252.0.0: calcolare la dimensione della rete richiede un po' di calcoli e di pratica</li>
</ol>
<p>Ad ogni modo, per molti anni si è usata questa notazione e si trova spesso ancora in uso, quindi è di fondamentale importanza comprendere il significato di queste maschere e saper passare dalla notazione ad ottetti alla notazione slash e viceversa.</p>
<h2><a class="header" href="#indirizzi-ip-senza-classi" id="indirizzi-ip-senza-classi">Indirizzi IP senza classi</a></h2>
<p>Il problema dell'assegnazione degli indirizzi si ripresentò verso la fine degli anni '80, in particolare per gli indirizzi di classe C: la nuova Internet Economy vedeva fiorire molte piccole aziende che avevano bisogno di pochi indirizzi IP, ma si trovavano costrette A pagare alte somme per avere un indirizzo di classe C, che per la maggior parte non utilizzavano.</p>
<p>Per cui, agli inizi degli anni '90 si cambiò di nuovo sistema, abbandonando il concetto di classe: ogni indirizzo IP, indipendentemente dal suo valore numerico, poteva avere una qualsiasi maschera di sottorete. Si passò contestualmente anche alla notazione slash, più compatta e chiara, che è ancora lo standard attuale.</p>
<blockquote>
<p>Alcuni enti ed aziende hanno mantenuto la proprietà di interi blocchi di classe A anche dopo il passaggio a CIDR. Per un elenco completo, guardate <a href="https://en.wikipedia.org/wiki/List_of_assigned_/8_IPv4_address_blocks">questa pagina</a>. La lista è molto interessante perché fa capire ancora oggi quali sono le influenze ed i rapporti di potere nel mondo di Internet!</p>
</blockquote>
<h2><a class="header" href="#passaggio-da-notazione-ad-ottetti-a-notazione-slash" id="passaggio-da-notazione-ad-ottetti-a-notazione-slash">Passaggio da notazione ad ottetti a notazione slash</a></h2>
<p>È importante saper passare da una notazione all'altra, perché nella pratica le troverete tutte e due.</p>
<h3><a class="header" href="#da-ottetti-a-slash" id="da-ottetti-a-slash">Da ottetti a slash</a></h3>
<p>Per passare da ottetti a slash, bisogna prima di tutto convertire ogni singolo ottetto in binario. Prendiamo ad esempio la maschera <code>255.255.240.0</code>. Il numero 255 è facilmente convertibile: sono otto bit tutti a 1. Per il terzo ottetto, <code>240</code>, bisogna fare un po' di calcoli. Ci sono vari metodi che avete studiato a TPSI; io uso il seguente modo semi-empirico, ma vanno tutti bene.</p>
<p>Per scomporre un byte in binario, prima di tutto scrivo la seguente tabella.</p>
<table><thead><tr><th align="center">128</th><th align="center">64</th><th align="center">32</th><th align="center">16</th><th align="center">8</th><th align="center">4</th><th align="center">2</th><th align="center">1</th></tr></thead><tbody>
<tr><td align="center">_</td><td align="center">_</td><td align="center">_</td><td align="center">_</td><td align="center">_</td><td align="center">_</td><td align="center">_</td><td align="center">_</td></tr>
</tbody></table>
<p>Ora metto degli 1 in modo che la somma dei numeri mi dia esattamente il numero che cerco. Nel nostro caso, per ottenere <code>240</code>, devo mettere 1 nelle prime quattro caselle.</p>
<table><thead><tr><th align="center">128</th><th align="center">64</th><th align="center">32</th><th align="center">16</th><th align="center">8</th><th align="center">4</th><th align="center">2</th><th align="center">1</th></tr></thead><tbody>
<tr><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">_</td><td align="center">_</td><td align="center">_</td><td align="center">_</td></tr>
</tbody></table>
<p>In tutte le altre caselle metto 0, ottenendo infine il seguente risultato.</p>
<table><thead><tr><th align="center">128</th><th align="center">64</th><th align="center">32</th><th align="center">16</th><th align="center">8</th><th align="center">4</th><th align="center">2</th><th align="center">1</th></tr></thead><tbody>
<tr><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="center">0</td></tr>
</tbody></table>
<p>Mi sono calcolato così che il numero <code>240</code> in decimale si converte in <code>11110000</code> in binario.</p>
<p>Ora metto tutti gli ottetti in fila.</p>
<table><thead><tr><th align="center">255</th><th align="center">255</th><th align="center">240</th><th align="center">0</th></tr></thead><tbody>
<tr><td align="center">11111111</td><td align="center">11111111</td><td align="center">11110000</td><td align="center">00000000</td></tr>
</tbody></table>
<p>Conto gli uno a partire dall'inizio, sono 8 + 8 + 4 = 20. Sono arrivato alla fine: la subnet mask in slash notation vale proprio 20!</p>
<p class="centered xxl-font">
<strong>
255.255.240.0 -> /20
</strong>
</p>
<h3><a class="header" href="#da-slash-a-ottetti" id="da-slash-a-ottetti">Da slash a ottetti</a></h3>
<p>Bisogna fare l'operazione inversa del paragrafo precedente. Ipotizziamo di avere la subnet <code>\27</code>. Per convertirla in ottetti, metto 27 bit a 1 di fila, separandoli a gruppi di 8 bit.</p>
<p class="centered large-font">
<strong>
11111111.11111111.11111111.11100000
</strong>
</p>
<p>I primi tre ottetti si calcolano immediatamente, perché essendo tutti 1 valgono 255. Per l'ultimo ottetto, faccio il calcolo, sempre usando la tabella di prima.</p>
<table><thead><tr><th align="center">128</th><th align="center">64</th><th align="center">32</th><th align="center">16</th><th align="center">8</th><th align="center">4</th><th align="center">2</th><th align="center">1</th></tr></thead><tbody>
<tr><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="center">0</td></tr>
</tbody></table>
<p>Quindi il numero che cerco è 128+64+32, che vale <code>224</code>. A questo punto abbiamo finito, la conversione diventa come segue.</p>
<p class="centered xxl-font">
<strong>
/27 -> 255.255.255.224
</strong>
</p>
<blockquote>
<p>Un utile sito per fare conversioni di questo genere è <a href="http://jodies.de/ipcalc">questo</a>. Non lo potete usarlo durante il compito, ma vi può tornare utile in futuro!</p>
</blockquote>
<h1><a class="header" href="#assegnazione-degli-indirizzi-di-rete" id="assegnazione-degli-indirizzi-di-rete">Assegnazione degli indirizzi di rete</a></h1>
<p>Finora abbiamo parlato di reti ed indirizzi IP, ma la domanda sorge spontanea: quali indirizzi posso utilizzare io per la mia rete, e quali no? Come faccio a saperlo?</p>
<p>La risposta è ovviamente...dipende. Nell'ipotesi in cui stessimo gestendo una rete completamente indipendente dal resto del mondo, potremmo scegliere gli indirizzi di rete che preferiamo, nessuno verrà a lamentarsi con noi, perché non diamo fastidio a nessuno.</p>
<p class="img-container">
<img class="right_side w10" title="ICANN" alt="ICANN" src="02-network/assets/icann.png">
<p>Ma se vogliamo connettere la nostra rete ad una rete più grande, magari all'Internet globale, c'è chiaramente bisogno di un organizzazione super partes che organizzi le cose. Questa organizzazione si chiama <a href="https://www.icann.org/">ICANN</a> (Internet Corporation for Assigned Names and Numbers) che, come dice il nome, si occupa proprio di assegnare i nomi ed in numeri di Internet in maniera da non creare conflitti.</p>
</p>
<p>ICANN attualmente funziona nel seguente modo:</p>
<ul>
<li>assegna degli indirizzi pubblici agli Internet Service Provider (es. TIM, Vodafone, Fastweb, Linkem, Civitanet, Aruba, etc.) che ne fanno richiesta</li>
<li>riserva alcuni indirizzi per utilizzi speciali, ad esempio per le reti locali private</li>
</ul>
<blockquote>
<p>A volte può capitare di sentir parlare di [IANA] (https://www.iana.org/)(Internet Assigned Numbers Authority). Non è in contraddizione con quanto detto prima: IANA è una emanazione dell'ICANN, con lo specifico compito di gestire gli indirizzi IP.</p>
</blockquote>
<h2><a class="header" href="#indirizzi-di-reti-locali-private" id="indirizzi-di-reti-locali-private">Indirizzi di reti locali private</a></h2>
<p>ICANN riserva i seguenti indirizzi da utilizzare per creare delle reti private all'interno della propria casa o della propria azienda:</p>
<ul>
<li><strong>10.0.0.0/8</strong>, che va quindi da 10.0.0.0 a 10.255.255.255, con una maschera di sottorete di default di 8 bit (classe A)</li>
<li><strong>172.16.0.0/12</strong>, che va quindi da 172.16.0.0 a 172.31.255.255, con una maschera di sottorete di default di 16 bit (classe B)</li>
<li><strong>192.168.0.0/16</strong>, che va quindi da 192.168.0.0 a 192.168.255.255, con una maschera di sottorete di default di 24 bit (classe C)</li>
</ul>
<p>Chiunque può utilizzare questi indirizzi senza dover chiedere il permesso a qualcuno. Fate attenzione però: questi indirizzi <strong>non</strong> possono far parte della rete internet globale, ma devono connettersi tramite un router che da un lato avrà un indirizzo locale, e dall'altro un indirizzo globale fornito da un ISP.</p>
<h1><a class="header" href="#ip-addressing" id="ip-addressing">IP addressing</a></h1>
<p>Ora abbiamo tutti gli strumenti essenziali per fare consapevolmente il nostro lavoro di sistemista!</p>
<p>Nella pratica del lavoro di un amministratore di rete, una delle prime e fondamentali competenze è saper creare correttamente reti e sottoreti. Non c'è necessariamente una scelta giusta ed una sbagliata: come al solito, dipende dalle esigenze del cliente, dai vincoli di spesa e da requisiti di sicurezza ed efficienza. Sicuramente però un'adeguata scelta delle sottoreti permetterà di semplificare molto il lavoro in futuro, ed una scelta infelice può portare a notti insonni e malfunzionamenti. Gli alleati migliori in questo lavoro sono come al solito studio, esperienza e saper chiedere aiuto quando necessario :)</p>
<h2><a class="header" href="#esempio-di-indirizzamento" id="esempio-di-indirizzamento">Esempio di indirizzamento</a></h2>
<p>Ipotizziamo che una scuola abbia appena messo in rete i propri computer e noi siamo i nuovi amministratori di rete. Per prima cosa, dobbiamo decidere come assegnare gli indirizzi IP.</p>
<p>I PC della scuola sono così distribuiti:</p>
<ul>
<li>3 laboratori con 20 computer ognuno</li>
<li>l'amministrazione usa 10 computer</li>
<li>ci sono circa 100 docenti con ognuno uno o due dispositivi da connettere alla rete</li>
</ul>
<p>OK. Per ogni rete che identifichiamo, dobbiamo individuare l'indirizzo di rete e la maschera di sottorete. Faccio notare che in questo momento non ci interessa se i dispositivi siano connessi fisicamente via switch oppure siano wireless. Nel nostro livello 3 della pila ISO/OSI, questo non ci importa. Detto questo...via!</p>
<p>Per prima cosa decidiamo di mettere ogni laboratorio in una propria sottorete, in modo che i docenti e gli assistenti di laboratorio possano trattarli in maniera indipendente. I computer dell' amministrazione ed i computer dei docenti sono altre due reti distinte, ed arriviamo quindi ad un totale di cinque reti. Per la rete dei docenti, ci conviene considerare il caso peggiore in cui tutti i docenti abbiamo due dispositivi: quindi consideriamo 200 host per il dimensionamento della rete.</p>
<p>Dobbiamo in pratica riempire la seguente tabella:</p>
<table><thead><tr><th>Numero host</th><th align="center">IP rete</th><th align="right">Subnet</th></tr></thead><tbody>
<tr><td>20</td><td align="center"></td><td align="right"></td></tr>
<tr><td>20</td><td align="center"></td><td align="right"></td></tr>
<tr><td>20</td><td align="center"></td><td align="right"></td></tr>
<tr><td>10</td><td align="center"></td><td align="right"></td></tr>
<tr><td>200</td><td align="center"></td><td align="right"></td></tr>
</tbody></table>
<h2><a class="header" href="#indirizzo-ip-della-rete" id="indirizzo-ip-della-rete">Indirizzo IP della rete</a></h2>
<p>Dobbiamo decidere che indirizzo di partenza dobbiamo dare all'intera rete, considerando che poi tutte le reti saranno a partire da quella. Sicuramente useremo degli indirizzi IP privati, visto che i computer della scuola non dovranno essere singolarmente raggiungibili da internet, e quindi non necessitano di un indirizzo IP pubblico. Ma quale indirizzi usiamo?</p>
<p>Visto che siamo una scuola, possiamo metterci comodi e scegliere di usare gli indirizzi privati <code>10.0.0.0/8</code>, in modo da avere tutti gli indirizzi IP che ci servono.</p>
<p>A questo punto abbiamo davanti a noi due strade:</p>
<ol>
<li>fare un indirizzamento &quot;facile&quot;, in cui assegniamo a tutte le reti la stessa maschera</li>
<li>fare un indirizzamento &quot;stretto&quot;, in cui assegniamo ad ogni rete la sua maschera minima.</li>
</ol>
<p>Quale scegliere? Ovviamente... dipende. Se non ci sono particolari vincoli, può essere utile la prima scelta: più semplice e veloce, meno errori. Se invece vogliamo per qualche motivo risparmiare indirizzi IP, scegliamo sicuramente la seconda strada.</p>
<p>Di seguito vediamo entrambi i casi.</p>
<h2><a class="header" href="#caso-1-stessa-subnet-mask-per-tutte-le-reti" id="caso-1-stessa-subnet-mask-per-tutte-le-reti">Caso 1: stessa subnet mask per tutte le reti</a></h2>
<p>Scegliamo per tutti la stessa subnet mask. In più, per essere ancora più comodi, scegliamo una maschera che sia un multiplo di 8, così tutti i conti ci vengono semplici.</p>
<p>Quale subnet scegliamo? Dovendone scegliere una per tutte, prendiamo in considerazione quella con il maggior numero di host, in questo caso quella per i docenti: 200 computer.</p>
<p>Si vede abbastanza facilmente che va bene una rete di classe C, cioè <code>/24</code>, che può contenere fino a 256 host. La nostra tabella può quindi essere riempita come segue.</p>
<table><thead><tr><th>Numero host</th><th align="center">IP rete</th><th align="right">Subnet</th></tr></thead><tbody>
<tr><td>20</td><td align="center">10.0.0.0</td><td align="right">/24</td></tr>
<tr><td>20</td><td align="center">10.0.1.0</td><td align="right">/24</td></tr>
<tr><td>20</td><td align="center">10.0.2.0</td><td align="right">/24</td></tr>
<tr><td>10</td><td align="center">10.0.3.0</td><td align="right">/24</td></tr>
<tr><td>200</td><td align="center">10.0.4.0</td><td align="right">/24</td></tr>
</tbody></table>
<h2><a class="header" href="#caso-2-subnet-mask-minima-per-ogni-rete" id="caso-2-subnet-mask-minima-per-ogni-rete">Caso 2: subnet mask minima per ogni rete</a></h2>
<p>In questo caso vogliamo invece calcolare per ogni rete la dimensione minima della subnet.</p>
<p>Il primo passo che ci conviene fare è ordinare le reti dalla più grande alla più piccola, come segue.</p>
<table><thead><tr><th>Numero host</th><th align="center">IP rete</th><th align="right">Subnet</th></tr></thead><tbody>
<tr><td>200</td><td align="center"></td><td align="right"></td></tr>
<tr><td>20</td><td align="center"></td><td align="right"></td></tr>
<tr><td>20</td><td align="center"></td><td align="right"></td></tr>
<tr><td>20</td><td align="center"></td><td align="right"></td></tr>
<tr><td>10</td><td align="center"></td><td align="right"></td></tr>
</tbody></table>
<p>A questo punto calcoliamo il numero di bit che ci servono per il dimensionamento di ogni rete. Ricordiamoci che al numero di host va aggiunto un indirizzo per la rete e uno per il broadcast, quindi il calcolo è:</p>
<p class="centered">
<strong>
numero IP = numero host + 2
</strong>
</p>
<p>Per la prima rete dei docenti, devo assegnare 202 indirizzi. La potenza di due maggiore di 202 più vicina è 256, che corrisponde a 8 bit. Quindi la parte fissa della nostra rete sarà, come abbiamo già visto, <code>32 - 8 = 24 bit</code>, che corrisponde alla subnet mask.</p>
<table><thead><tr><th>Numero host</th><th align="center">IP rete</th><th align="right">Subnet</th></tr></thead><tbody>
<tr><td>200</td><td align="center">10.0.0.0</td><td align="right">/24</td></tr>
<tr><td>20</td><td align="center"></td><td align="right"></td></tr>
<tr><td>20</td><td align="center"></td><td align="right"></td></tr>
<tr><td>20</td><td align="center"></td><td align="right"></td></tr>
<tr><td>10</td><td align="center"></td><td align="right"></td></tr>
</tbody></table>
<p>Passiamo alla seconda rete. La prima cosa da fare è calcolare l'IP della rete. Come facciamo? Dobbiamo calcolare il primo indirizzo IP libero dopo la rete precedente. Siccome la rete dei docenti parte da 10.0.0.0 e ha 256 IP, il primo indirizzo IP disponibile è 10.0.1.0.</p>
<table><thead><tr><th>Numero host</th><th align="center">IP rete</th><th align="right">Subnet</th></tr></thead><tbody>
<tr><td>200</td><td align="center">10.0.0.0</td><td align="right">/24</td></tr>
<tr><td>20</td><td align="center">10.0.1.0</td><td align="right"></td></tr>
<tr><td>20</td><td align="center"></td><td align="right"></td></tr>
<tr><td>20</td><td align="center"></td><td align="right"></td></tr>
<tr><td>10</td><td align="center"></td><td align="right"></td></tr>
</tbody></table>
<p>Per il calcolo della maschera, considerando che i laboratori hanno 20 computer, abbiamo bisogno di <code>20 + 2 = 22</code> IP. La potenza di due più vicina è 32, che corrisponde a 5 bit. La subnet è quindi <code>32 - 5 = 27 bits</code>.</p>
<p>Ricapitolando, per la seconda rete la situazione è la seguente.</p>
<table><thead><tr><th>Numero host</th><th align="center">IP rete</th><th align="right">Subnet</th></tr></thead><tbody>
<tr><td>200</td><td align="center">10.0.0.0</td><td align="right">/24</td></tr>
<tr><td>20</td><td align="center">10.0.1.0</td><td align="right">/27</td></tr>
<tr><td>20</td><td align="center"></td><td align="right"></td></tr>
<tr><td>20</td><td align="center"></td><td align="right"></td></tr>
<tr><td>10</td><td align="center"></td><td align="right"></td></tr>
</tbody></table>
<p>Ora, per calcolare l'IP di partenza della rete successiva bisogna prestare un po' di attenzione. La rete che abbiamo appena calcolato parte da <code>10.0.1.0</code> e ha 32 IP. Quindi la rete successiva partirà da <code>10.0.1.32</code>. La maschera di rete è la stessa, avendo lo stesso numero di host all'interno.</p>
<table><thead><tr><th>Numero host</th><th align="center">IP rete</th><th align="right">Subnet</th></tr></thead><tbody>
<tr><td>200</td><td align="center">10.0.0.0</td><td align="right">/24</td></tr>
<tr><td>20</td><td align="center">10.0.1.0</td><td align="right">/27</td></tr>
<tr><td>20</td><td align="center">10.0.1.32</td><td align="right">/27</td></tr>
<tr><td>20</td><td align="center"></td><td align="right"></td></tr>
<tr><td>10</td><td align="center"></td><td align="right"></td></tr>
</tbody></table>
<p>Ripetendo il ragionamento anche per la quarta rete, arriviamo alla seguente situazione.</p>
<table><thead><tr><th>Numero host</th><th align="center">IP rete</th><th align="right">Subnet</th></tr></thead><tbody>
<tr><td>200</td><td align="center">10.0.0.0</td><td align="right">/24</td></tr>
<tr><td>20</td><td align="center">10.0.1.0</td><td align="right">/27</td></tr>
<tr><td>20</td><td align="center">10.0.1.32</td><td align="right">/27</td></tr>
<tr><td>20</td><td align="center">10.0.1.64</td><td align="right">/27</td></tr>
<tr><td>10</td><td align="center"></td><td align="right"></td></tr>
</tbody></table>
<p>Infine, calcoliamo IP e subnet della rete amministrativa, l'ultima. Lascio a voi di ripetere i calcoli precedenti e verificare che la tabella completa è come segue.</p>
<table><thead><tr><th>Numero host</th><th align="center">IP rete</th><th align="right">Subnet</th></tr></thead><tbody>
<tr><td>200</td><td align="center">10.0.0.0</td><td align="right">/24</td></tr>
<tr><td>20</td><td align="center">10.0.1.0</td><td align="right">/27</td></tr>
<tr><td>20</td><td align="center">10.0.1.32</td><td align="right">/27</td></tr>
<tr><td>20</td><td align="center">10.0.1.64</td><td align="right">/27</td></tr>
<tr><td>10</td><td align="center">10.0.1.96</td><td align="right">/28</td></tr>
</tbody></table>
<h1><a class="header" href="#calcolo-degli-indirizzi-di-rete-e-broadcast" id="calcolo-degli-indirizzi-di-rete-e-broadcast">Calcolo degli indirizzi di rete e broadcast</a></h1>
<p>Quando abbiamo un host con un certo indirizzo IP ed una subnet mask, un'operazione che dobbiamo frequentemente fare è sapere l'indirizzo della rete alla quale appartiene ed il relativo indirizzo di broadcast.</p>
<p>In questa sezione vedremo come fare.</p>
<h2><a class="header" href="#classful" id="classful">Classful</a></h2>
<p>Nel caso di indirizzamento classful, è facile calcolare l'indirizzo della rete e di broadcast.</p>
<p>Ad esempio ipotizziamo di avere un host con il seguente IP e maschera:</p>
<p class="centered">
<strong>
192.168.7.55/24
</strong>
</p>
<p>È un indirizzo di classe C, quindi l'indirizzo di rete è il primo della classe e il broadcast l'ultimo.</p>
<table><thead><tr><th>IP/subnet</th><th align="center">IP rete</th><th align="right">IP broadcast</th></tr></thead><tbody>
<tr><td>192.168.7.55/24</td><td align="center">192.168.7.0</td><td align="right">192.168.7.255</td></tr>
</tbody></table>
<p>Analogamente per la classe B e la classe A si ottengono risultati analoghi.
Ipotizziamo di avere gli host con gli IP nella prima colonna, nelle altre due ci sono i relativi indirizzi di rete e broadcast.</p>
<table><thead><tr><th>IP/subnet</th><th align="center">IP rete</th><th align="right">IP broadcast</th></tr></thead><tbody>
<tr><td>172.16.4.8/16</td><td align="center">172.16.0.0</td><td align="right">172.16.255.255</td></tr>
<tr><td>10.12.0.44/8</td><td align="center">10.0.0.0</td><td align="right">10.255.255.255</td></tr>
</tbody></table>
<h2><a class="header" href="#classless" id="classless">Classless</a></h2>
<p>Le cose diventano un po' più complesse quando abbiamo degli indirizzi classless: dobbiamo far ricorso ad un po' di matematica.</p>
<p>Ipotizziamo lo stesso indirizzo di prima, ma con una diversa maschera di sottorete:</p>
<p class="centered">
<strong>
192.168.7.55/28
</strong>
</p>
<p>Per prima cosa dobbiamo convertire l'indirizzo IP dell'host in binario.</p>
<table><thead><tr><th>Decimale</th><th align="center"></th><th align="center">Binario</th></tr></thead><tbody>
<tr><td>192</td><td align="center">--&gt;</td><td align="center">11000000</td></tr>
<tr><td>168</td><td align="center">--&gt;</td><td align="center">10101000</td></tr>
<tr><td>7</td><td align="center">--&gt;</td><td align="center">00000111</td></tr>
<tr><td>55</td><td align="center">--&gt;</td><td align="center">00110111</td></tr>
</tbody></table>
<p>Che ci porta quindi ad avere il seguente risultato:</p>
<table><thead><tr><th>IP</th><th align="center"></th><th align="center">Binario</th></tr></thead><tbody>
<tr><td>192.168.7.55</td><td align="center">--&gt;</td><td align="center">11000000 10101000 00000111 00110111</td></tr>
</tbody></table>
<p>Calcoliamo ora anche la maschera di sottorete in binario. È sufficiente mettere tanti 1 quanto il valore della maschera, e aggiungere 0 fino ad arrivare a 32.</p>
<table><thead><tr><th>Subnet</th><th align="center"></th><th align="center">Binario</th></tr></thead><tbody>
<tr><td>/28</td><td align="center">--&gt;</td><td align="center">11111111 11111111 11111111 11110000</td></tr>
</tbody></table>
<p>Ora siamo pronti a calcolare indirizzo IP della rete e broadcast.</p>
<h3><a class="header" href="#indirizzo-di-rete-1" id="indirizzo-di-rete-1">Indirizzo di rete</a></h3>
<p>Per l'indirizzo di rete,dobbiamo fare l'operazione logica <code>AND</code> tra l'indirizzo IP.</p>
<p>La tabella di verità per l'operatore logico <code>AND</code> è il seguente:</p>
<table><thead><tr><th>A</th><th align="center">B</th><th align="center">A and B</th></tr></thead><tbody>
<tr><td>0</td><td align="center">0</td><td align="center">0</td></tr>
<tr><td>0</td><td align="center">1</td><td align="center">0</td></tr>
<tr><td>1</td><td align="center">0</td><td align="center">0</td></tr>
<tr><td>1</td><td align="center">1</td><td align="center">1</td></tr>
</tbody></table>
<p>Quindi, abbiamo un valore 1 in uscita se e solo se entrambi i valori in ingresso sono 1.</p>
<p>Effettuiamo ora l'operazione.</p>
<table><thead><tr><th></th><th></th></tr></thead><tbody>
<tr><td>11000000 10101000 00000111 00110111</td><td>AND</td></tr>
<tr><td>11111111 11111111 11111111 11110000</td><td>=</td></tr>
<tr><td>___________________________________</td><td></td></tr>
<tr><td>11000000 10101000 00000111 00110000</td><td></td></tr>
</tbody></table>
<p>Bene, ci siamo quasi! Ora dobbiamo riconvertire da binario a decimale l'indirizzo appena calcolato, ed otteniamo il seguente risultato:</p>
<p class="centered">
<strong>
IP di rete: 192.168.7.48
</strong>
</p>
<h3><a class="header" href="#broadcast" id="broadcast">Broadcast</a></h3>
<p>Ci manca di calcolare l'indirizzo di broadcast. Abbiamo diverse opzioni, ne propongo qui due.</p>
<h4><a class="header" href="#metodo-empirico" id="metodo-empirico">Metodo empirico</a></h4>
<p>Come prima possibilità, posso calcolare il numero di IP contenuti nella rete e sommare tale numero all'indirizzo IP della rete.</p>
<p>Nel nostro caso, abbiamo una maschera /28, quindi il numero di IP disponibili nella rete è:</p>
<p class="centered">
2 ^ (32-28) = 2 ^ 4 = 16
</p>
<p>Quindi sommando l'indirizzo di rete al numero di host e sottraendo uno (in quanto devo contare anche l'IP di rete nel conto):</p>
<p class="centered">
(192.168.7.48 + 16 - 1) = 192.168.7.63
</p>
<p>Quindi l'indirizzo di broadcast è:</p>
<p class="centered">
<strong>
IP di broadcast: 192.168.7.63
</strong>
</p>
<h4><a class="header" href="#metodo-numerico" id="metodo-numerico">Metodo numerico</a></h4>
<p>Posso effettuare anche un operazione logica per il calcolo del broadcast, simile a quello che abbiamo fatto prima per l'indirizzo di rete. Dobbiamo però usare l'operatore <code>OR</code> ed al posto della maschera di sottorete, il suo valore <em>negato</em>. Vediamo nel dettaglio.</p>
<p>L'operatore logico <code>OR</code> ha la seguente tabella di verità.</p>
<table><thead><tr><th>A</th><th align="center">B</th><th align="center">A or B</th></tr></thead><tbody>
<tr><td>0</td><td align="center">0</td><td align="center">0</td></tr>
<tr><td>0</td><td align="center">1</td><td align="center">1</td></tr>
<tr><td>1</td><td align="center">0</td><td align="center">1</td></tr>
<tr><td>1</td><td align="center">1</td><td align="center">1</td></tr>
</tbody></table>
<p>Con l'operatore <code>OR</code>, abbiamo un valore 1 in uscita se uno dei due valori in ingresso è pari a 1.</p>
<p>Inoltre, come detto, nella nostra operazione dobbiamo usare il valore <em>negato</em> della maschera di rete, ovvero dobbiamo invertire tutti gli 0 con 1 e viceversa. La negazione si chiama anche operatore <code>NOT</code>.</p>
<table><thead><tr><th>Subnet mask</th><th align="center">NOT Subnet mask</th></tr></thead><tbody>
<tr><td>11111111 11111111 11111111 11110000</td><td align="center">00000000 00000000 00000000 00001111</td></tr>
</tbody></table>
<p>Effettuiamo ora l'operazione.</p>
<table><thead><tr><th></th><th></th></tr></thead><tbody>
<tr><td>11000000 10101000 00000111 00110111</td><td>OR</td></tr>
<tr><td>00000000 00000000 00000000 00001111</td><td>=</td></tr>
<tr><td>___________________________________</td><td></td></tr>
<tr><td>11000000 10101000 00000111 00111111</td><td></td></tr>
</tbody></table>
<p>Infine convertiamo da binario a decimale e otteniamo</p>
<p class="centered">
<strong>
IP di broadcast: 192.168.7.63
</strong>
</p>
<p>Che ovviamente è lo stesso indirizzo calcolato in precedenza con l'altro metodo. Ognuno può usare il metodo che preferisce, in base alle proprie attitudini o al valore della maschera di sottorete.</p>
<h2><a class="header" href="#esercizi-di-preparazione" id="esercizi-di-preparazione">Esercizi di preparazione</a></h2>
<p>Per prepararsi al compito, calcolare indirizzo IP di rete e di broadcast per i seguenti casi.</p>
<table><thead><tr><th>IP/subnet</th><th align="center">IP rete</th><th align="right">IP broadcast</th></tr></thead><tbody>
<tr><td>192.168.0.122/24</td><td align="center"></td><td align="right"></td></tr>
<tr><td>192.168.0.122/26</td><td align="center"></td><td align="right"></td></tr>
<tr><td>192.168.0.122/28</td><td align="center"></td><td align="right"></td></tr>
<tr><td>192.168.0.122/23</td><td align="center"></td><td align="right"></td></tr>
<tr><td>192.168.0.122/20</td><td align="center"></td><td align="right"></td></tr>
<tr><td>7.15.22.90/24</td><td align="center"></td><td align="right"></td></tr>
<tr><td>7.15.22.90/26</td><td align="center"></td><td align="right"></td></tr>
<tr><td>7.15.22.90/28</td><td align="center"></td><td align="right"></td></tr>
<tr><td>7.15.22.90/23</td><td align="center"></td><td align="right"></td></tr>
<tr><td>7.15.22.90/20</td><td align="center"></td><td align="right"></td></tr>
</tbody></table>
<h1><a class="header" href="#routing" id="routing">Routing</a></h1>
<p>Nel capitolo precedente, abbiamo appreso le basi di networking: che cos'è un indirizzo IP, e come assegnarli a dei dispositivi.</p>
<p>In questo capitolo parleremo di come far comunicare più reti fra di loro, analizzando diverse situazioni, dalle più semplici alle più complesse.</p>
<p>Per cominciare, consideriamo il caso più semplice di tutti: due reti collegate tra di loro da un router.</p>
<p>Nel video seguente viene illustrato come viaggia un pacchetto da una rete all'altra. Vi consiglio di abilitare i sottotitoli in inglese e rallentare la velocità di riproduzione, per facilitare la comprensione.</p>
<blockquote>
<p>È anche possibile mettere i sottotitoli tradotti automaticamente in italiano; la qualità è abbastanza buona ma, come consiglio personale, è generalmente meglio usare i sottotitoli in lingua originale. Inoltre ascoltare l'inglese e leggere i sottotitoli nella stessa lingua è un ottimo esercizio, considerando che questa lingua vi servirà quasi sicuramente per qualsiasi cosa decidiate di fare dopo, dal panettiere al manager d'industria.</p>
</blockquote>
<iframe width="560" height="315" src="https://www.youtube.com/embed/rYodcvhh7b8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<h1><a class="header" href="#wan" id="wan">WAN</a></h1>
<p>Consideriamo il caso in cui...</p>
<h1><a class="header" href="#routing-1" id="routing-1">Routing</a></h1>
<p>Un algoritmo per calcolare...</p>
<h1><a class="header" href="#transport-layer" id="transport-layer">Transport Layer</a></h1>
<h1><a class="header" href="#introduzione-a-nat--pat" id="introduzione-a-nat--pat">Introduzione a NAT &amp; PAT</a></h1>
<p>Per risolvere il problema delle sottoreti...</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
