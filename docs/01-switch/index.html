<!DOCTYPE HTML>
<html lang="it" class="sidebar-visible no-js">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Data Link - Sistemi e Reti - 4y</title>
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body class="light">
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            document.body.className = theme;
            document.querySelector('html').className = theme + ' js';
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li><a href="../index.html"><strong aria-hidden="true">1.</strong> Benvenuti</a></li><li><a href="../01-switch/index.html" class="active"><strong aria-hidden="true">2.</strong> Data Link</a></li><li><a href="../02-network/index.html"><strong aria-hidden="true">3.</strong> Network</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">Sistemi e Reti - 4y</h1>

                        <div class="right-buttons">
                            <a href="../print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                            
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <style>
.centered {
	text-align: center;
}

img {
  width: 20%;
}

img.right_side {
  float: right;
  margin:5px 5px 0px 20px;
  width: 30%;
}
img.w10 {
  width: 50%;
}
img.left_side {
  float:left;
  margin:5px 20px 0px 5px;
  width: 20%;
}

p.clear {
  clear: both;  
}
p.img-container {
  margin-bottom: 15px;
}

p.img-container::after {
  margin-bottom: 15px;
  overflow: hidden;
  clear: both;
}
</style>
<h1><a class="header" href="#data-link-layer" id="data-link-layer">Data-link layer</a></h1>
<p>Cominciamo le lezioni di quest'anno con un approfondimento sul livello 2 della pila ISO-OSI: il <em>data-link layer</em>.</p>
<p>Come dice il nome, il livello data-link ci assicura che ci sia un collegamento (<em>link</em>) che permetta di scambiare dati tra più computer. Il suo funzionamento quindi prevederà il minimo necessario per far sì che questo avvenga.</p>
<p>Per cominciare, ci dovrà essere un modo per distinguere le diverse macchine tra di loro. Come facciamo a dire che il destinatario del mio messaggio deve essere un esatto computer, e che il mittente sono proprio io? Per fare questo, il livello 2 data-link utilizza il concetto di <em>indirizzo MAC</em> (in inglese MAC address).</p>
<blockquote>
<p>MAC è l'acronimo di Media Access Control.</p>
</blockquote>
<p class="img-container">
<img class="right_side w10" title="MAC address" alt="MAC address" src="assets/mac.png">
<p>Possiamo pensare al MAC come il codice fiscale della nostra interfaccia di rete, che è univoca in tutto il mondo. In altre parole, non possono esistere due interfacce di rete con lo stesso indirizzo MAC. È composto da 6 byte (48 bit), che convenzionalmente sono divisi tra loro da <code>:</code> (due punti). Un MAC address valido è, ad esempio, <code>01:02:03:ab:cd:ef</code>.</p>
</p>
<blockquote>
<p>Secondo lo standard più diffuso attualmente, i primi 3 byte del MAC identificano la casa produttrice, e gli ultimi 3 l'interfaccia.</p>
</blockquote>
<blockquote>
<p>Potreste trovare anche altri separatori tra i byte del MAC address, come ad esempio il punto o il trattino. Sono meno comuni e ne scoraggio l'uso.</p>
</blockquote>
<p>Sottolineo che parliamo di <em>interfacce di rete</em> e non di computer perché, molto spesso, un computer ha più di una interfaccia. Ad esempio uno smartphone ha l'interfaccia per la rete dati in 4G ed un'altra interfaccia per il WiFi. Ovviamente, le due interfacce avranno MAC address diversi.</p>
<p>Immaginiamo quindi di dover connettere tre computer tra di loro. Per comodità, li connettiamo tutti ad uno switch, che ricordiamo essere un dispositivo di rete con tante <em>porte</em> a cui si possono collegare altrettante macchine. Lo switch, avrà quindi il compito di smistare i pacchetti al giusto destinatario.</p>
<p class="centered">
<img style="width:85%; margin:15px 0" title="switch-example" alt="switch-example" src="assets/01-switch.jpeg" >
</p>
<p>Domanda: perché lo switch deve preoccuparsi di smistare il pacchetto solo al destinatario, e non inoltra tutto a tutti? Identifichiamo due problemi principali.</p>
<ul>
<li>sicurezza: non vogliamo che tutti i computer siano in grado di leggere i messaggi diretti ad altri</li>
<li>traffico: vogliamo ridurre il traffico sui cavi il più possibile</li>
</ul>
<blockquote>
<p>Fino a qualche anno fa esistevano dei dispositivi che inoltravano tutto a tutti, si chiamavano <em>hub</em>, ora non sono più usati.</p>
</blockquote>
<p>Il funzionamento di uno switch, almeno a livello concettuale, è abbastanza semplice. Al suo interno, si salva in memoria una tabella con due colonne e tante righe quante sono le porte fisiche dello switch.</p>
<table><thead><tr><th>Port number</th><th>MAC address</th></tr></thead><tbody>
<tr><td>1</td><td>16:a7:c7:66:13:f9</td></tr>
<tr><td>2</td><td>4A:00:06:05:eb:32</td></tr>
<tr><td>3</td><td></td></tr>
<tr><td>4</td><td>06:cd:89:9a:64:77</td></tr>
</tbody></table>
<p>Quando riceve un pacchetto, lo switch prima di tutto assegna (se già non lo aveva fatto in precedenza) il MAC address del mittente alla porta dal quale lo ho ricevuto. Quindi controlla il MAC address del destinatario, e lo inoltra solo alla porta dove è connesso tale destinatario.</p>
<p>Esempio: il computer nella porta 1 ha MAC address <code>16:a7:c7:66:13:f9</code> e vuole inviare un messaggio a <code>06:cd:89:9a:64:77</code>. Quando lo switch riceve il messaggio dalla porta 1, assegna <code>16:a7:c7:66:13:f9</code> a tale porta. Quindi controlla in quale riga c'è l'indirizzo del destinatario, in questo caso la porta 4, e inoltra il pacchetto solo a quella porta.</p>
<p>Ma all'inizio, quando accendo per la prima volta lo switch, come faccio a riempire tutta la tabella? Ci sono varie strategie.</p>
<ul>
<li>quando un nuovo dispositivo si connette, invia un messaggio di broadcast che ha come destinatario lo speciale indirizzo <code>ff:ff:ff:ff:ff:ff</code>. Tutti i dispositivi connessi rispondono a questo messaggio, e la tabella viene riempita</li>
<li>quando non trovo il destinatario di un messaggio nella tabella, lo inoltro a tutti, sperando che il corretto destinatario lo riceva. Questa operazione è chiamata <em>flooding</em> (allagamento).</li>
</ul>
<p>Se non è possibile consegnare il pacchetto, lo switch risponde al mittente comunicando che il destinatario non è reperibile.</p>
<h2><a class="header" href="#switch-di-livelli-superiori" id="switch-di-livelli-superiori">Switch di livelli superiori</a></h2>
<p>Il comportamento dello switch descritto fin qui è quello di uno switch &quot;puro&quot;, ovvero che opera unicamente al livello 2 data-link della pila ISO/OSI. Un tale dispositivo viene chiamato anche <em>switch L2</em>, e non sa niente dei livelli superiori; in particolare non sa cosa sia un indirizzo IP. È importante notare però che, al giorno d'oggi, molto spesso gli switch hanno molte funzioni ed operano anche a livelli superiori. Questo genere di dispositivi viene chiamato, in base alle caratteristiche, <em>switch L2+</em>, <em>switch L2/L3</em> o anche <em>switch L3</em>.</p>
<p>Quindi non vi stupite se vedete un oggetto chiamato &quot;switch&quot; che lavora anche con IP e altro. L'importante è che sappiate orientarvi sempre correttamente e che non vi confondiate.</p>
<h2><a class="header" href="#mac-address-e-sicurezza-informatica" id="mac-address-e-sicurezza-informatica">MAC address e sicurezza informatica</a></h2>
<p>Abbiamo detto che il MAC address è univoco, associato all'interfaccia di rete. Aggiungiamo che non si può <em>cambiare</em> il MAC address scritto all'interno della scheda, perché è <em>hard-coded</em> al momento della fabbricazione. È possibile tuttavia <em>camuffarlo</em> nel momento dell'invio, in modo da fingerci qualcun altro. Questa strategia si chiama &quot;MAC spoofing&quot; ed ha moltissimi usi.</p>
<p>Alcune applicazioni possono servire ad attaccare un sistema e a rubare informazioni che non sono dirette a noi. Oppure possiamo usarlo per impedire di essere tracciati dal nostro operatore telefonico o dal gestore del WiFi, o ancora per usare una licenza di un software che era associata ad un altro computer.</p>
<p>Il MAC spoofing, come molto spesso accade in informatica, non è legale od illegale <em>di per sé</em>. Dipende dall'uso che ne facciamo, e molto spesso il confine della legalità è molto sfumato e difficile da definire.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../02-network/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a href="../index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a href="../02-network/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
